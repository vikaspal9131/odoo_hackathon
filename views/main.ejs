<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Skill Swap - Find Your Match</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body class="bg-white  text-black min-h-screen">
  <div class="container mx-auto p-4 md:p-8 ">

      <nav class="main-nav p-4  sticky top-0 z-50 backdrop-blur-sm bg-opacity-70">
        <div class="container mx-auto flex justify-between items-center">
            <a href="/" class="text-2xl font-bold">Skill Swap</a>
            <div class="flex items-center space-x-4">
                <a href="/browse" class="text-sm font-medium text-blue-500">Home</a>
               
                <a href="/profile" class="text-sm font-medium hover:text-blue-500" style="color: var(--color-text-secondary);">Profile</a>
                <a href="/login" class="text-sm font-medium hover:text-blue-500" style="color: var(--color-text-secondary);">Login</a>
                <button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-sm p-2">
                    <i id="theme-toggle-dark-icon" class="fas fa-moon w-5 h-5"></i>
                    <i id="theme-toggle-light-icon" class="fas fa-sun w-5 h-5 hidden"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="text-center mb-10 mt-10">
      <h1 class="text-4xl font-bold">Find Your Skill Match</h1>
      <p class="mt-2 text-gray-400">Search for skills you want to learn.</p>

      <!-- Search Bar -->
      <div class="mt-6 max-w-2xl mx-auto">
        <form action="/search" method="POST">
          <div class="relative flex items-center w-full p-2 border-2  rounded-full">
            <i class="fas fa-search mx-3 text-black"></i>
            <input
              type="text"
              name="query"
              placeholder="Search for 'Excel', 'Photoshop', 'Guitar'..."
              class="w-full bg-transparent focus:outline-none text-black"
              value="<%= query || '' %>"
              required
            >
            <button
              class="px-6 py-2 ml-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-full transition-colors">
              Search
            </button>
          </div>
        </form>
      </div>
    </header>

    <!-- Results -->
  <ul class="flex flex-wrap gap-6 justify-start">
  <% users.forEach(u => { %>
    <li class="w-full sm:w-[45%] md:w-[30%] p-6 border rounded-xl shadow-md ">
      <div class="mb-2">
        <strong class="text-blue-400">Email:</strong> <%= u.email %>
      </div>
      <div class="mb-2">
        <strong class="text-green-400">Offers:</strong>
        <%= Array.isArray(u.skillsOffered) ? u.skillsOffered.join(", ") : "N/A" %>
      </div>
      <div class="mb-2">
        <strong class="text-yellow-400">Wants:</strong>
        <%= Array.isArray(u.skillsWanted) ? u.skillsWanted.join(", ") : "N/A" %>
      </div>

      <% if (user && user._id.toString() !== u._id.toString()) { %>
        <form action="/swap-request/<%= u._id %>" method="POST" class="mt-3">
          <button
            type="submit"
            class="px-5 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-medium text-sm transition">
            Send Swap Request
          </button>
        </form>
      <% } else if (user && user._id.toString() === u._id.toString()) { %>
        <p class="text-sm text-gray-500 italic mt-3">This is you.</p>
      <% } else { %>
        <p class="text-sm text-red-500 italic mt-3">Please login to send request</p>
      <% } %>
    </li>
  <% }) %>
</ul>

  </div>
</body>
</html>
